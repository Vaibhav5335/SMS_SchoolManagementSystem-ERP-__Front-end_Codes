<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Homework - Teacher Portal</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          fontFamily: {
            sans: ['Plus Jakarta Sans', 'Inter', 'sans-serif']
          },
          colors: {
            brand: {
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8'
            }
          },
          animation: {
            'fade-in-up': 'fadeInUp 0.6s ease-out'
          },
          keyframes: {
            fadeInUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            }
          }
        }
      }
    }
  </script>

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Plus Jakarta Sans', sans-serif; }
    html, body { scrollbar-width: none; }
    html::-webkit-scrollbar, body::-webkit-scrollbar { display: none; }
    
    /* Add left padding to main content area */
    @media (min-width: 1024px) {
      #mainContent {
        padding-left: 1rem !important;
      }
    }
    
    /* Ensure proper dark mode focus states */
    input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }
    
    .dark input:focus, .dark textarea:focus {
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
    }
  </style>
</head>

<body class="bg-slate-50 dark:bg-slate-950 transition-colors duration-300">

  <!-- Sidebar root -->
  <div id="appShell"></div>

  <!-- Homework Page Content -->
  <div id="homeworkContent" class="hidden w-full max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6 animate-fade-in-up">

    <!-- Create Homework -->
    <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-3xl p-6 shadow-sm mb-8">
      <h2 class="text-lg font-bold mb-4 text-slate-900 dark:text-white">
        <i class="fas fa-plus-circle text-brand-600 mr-2"></i>
        Create New Assignment
      </h2>

      <form id="homeworkForm" class="space-y-4">
        <input id="titleInput" required
          class="w-full px-4 py-3 border rounded-xl dark:bg-slate-800 dark:text-white dark:border-slate-700"
          placeholder="Assignment title">

        <textarea id="descriptionInput" required rows="4"
          class="w-full px-4 py-3 border rounded-xl dark:bg-slate-800 dark:text-white dark:border-slate-700"
          placeholder="Assignment description"></textarea>

        <input id="dueDateInput" type="date" required
          class="px-4 py-3 border rounded-xl dark:bg-slate-800 dark:text-white dark:border-slate-700">

        <button type="submit"
          class="bg-brand-600 hover:bg-brand-700 text-white px-6 py-3 rounded-xl font-bold">
          Assign Homework
        </button>
      </form>
    </section>

    <!-- Assignment List -->
    <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-3xl p-6 shadow-sm">
      <h2 class="text-lg font-bold mb-4 text-slate-900 dark:text-white">
        <i class="fas fa-history text-amber-600 mr-2"></i>
        Active Assignments
      </h2>
      <div id="assignmentsList" class="space-y-4"></div>
    </section>

  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../js/supabase-config.js"></script>
  <script src="../js/data-service.js"></script>
  <script src="../js/error-handler.js"></script>

  <!-- ❗ REQUIRED -->
  <script src="sidebar.js"></script>

  <script src="../js/theme-manager.js"></script>

  <!-- Page Logic -->
  <script>
    // Wait for sidebar to be loaded
    function waitForSidebar() {
      const mainContent = document.getElementById('mainContent');
      if (mainContent) {
        // Move homework content into the main content area
        const homeworkContent = document.getElementById('homeworkContent');
        if (homeworkContent) {
          mainContent.appendChild(homeworkContent);
          homeworkContent.classList.remove('hidden');
        }
        loadAssignments();
      } else {
        setTimeout(waitForSidebar, 100);
      }
    }

    const assignments = [
      {
        title: 'Algebra Practice',
        description: 'Solve questions 1–10 on page 45',
        due: '2026-02-15'
      }
    ];

    function loadAssignments() {
      const list = document.getElementById('assignmentsList');
      if (!list) return;
      
      list.innerHTML = '';
      assignments.forEach(a => {
        list.innerHTML += `
          <div class="border rounded-xl p-4 bg-white dark:bg-slate-800 dark:border-slate-700">
            <h3 class="font-bold text-slate-900 dark:text-white">${a.title}</h3>
            <p class="text-sm text-slate-700 dark:text-slate-300">${a.description}</p>
            <p class="text-xs text-slate-500 dark:text-slate-400">Due: ${a.due}</p>
          </div>
        `;
      });
    }

    // Initialize page
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', waitForSidebar);
    } else {
      waitForSidebar();
    }
  </script>


  <!-- Toast Container -->
  <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2 max-w-sm pointer-events-none"></div>

  <script src="../js/auth-guard.js"></script>
  <script src="../js/global-search.js"></script>
  <script src="../js/notification-service.js"></script>
  <script src="../js/export-service.js"></script>

</body>
</html>
