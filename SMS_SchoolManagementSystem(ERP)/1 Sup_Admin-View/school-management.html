<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Management - Super Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-indigo-600 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <a href="dashboard.html" class="hover:text-indigo-200">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <i class="fas fa-school text-2xl"></i>
                    <h1 class="text-xl font-bold">School Management</h1>
                </div>
                <button onclick="toggleMobileMenu()" class="md:hidden">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header Actions -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <h2 class="text-2xl font-bold text-gray-800">Manage School Tenants</h2>
            <button onclick="openAddSchoolModal()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition shadow-lg flex items-center">
                <i class="fas fa-plus mr-2"></i>Add New School
            </button>
        </div>

        <!-- Search and Filter -->
        <div class="bg-white rounded-lg shadow p-4 mb-6">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <div class="relative">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input type="text" id="searchInput" placeholder="Search schools..." 
                            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                </div>
                <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                    <option>All Status</option>
                    <option>Active</option>
                    <option>Inactive</option>
                    <option>Suspended</option>
                </select>
            </div>
        </div>

        <!-- Schools Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="schoolsGrid">
            <!-- School Card 1 -->
            <div class="bg-white rounded-lg shadow hover:shadow-xl transition p-6">
                <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 p-3 rounded-lg">
                            <i class="fas fa-school text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">Greenwood High School</h3>
                            <p class="text-sm text-gray-600">School ID: SCH001</p>
                        </div>
                    </div>
                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Active</span>
                </div>
                <div class="space-y-2 mb-4">
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-users w-5"></i>
                        <span>1,245 Students</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-chalkboard-teacher w-5"></i>
                        <span>85 Teachers</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-calendar w-5"></i>
                        <span>Est. 2015</span>
                    </div>
                </div>
                <div class="flex space-x-2">
                    <button onclick="viewSchool('SCH001')" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition text-sm">
                        <i class="fas fa-eye mr-1"></i>View
                    </button>
                    <button onclick="editSchool('SCH001')" class="flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition text-sm">
                        <i class="fas fa-edit mr-1"></i>Edit
                    </button>
                </div>
            </div>

            <!-- School Card 2 -->
            <div class="bg-white rounded-lg shadow hover:shadow-xl transition p-6">
                <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 p-3 rounded-lg">
                            <i class="fas fa-school text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">St. Mary's Academy</h3>
                            <p class="text-sm text-gray-600">School ID: SCH002</p>
                        </div>
                    </div>
                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Active</span>
                </div>
                <div class="space-y-2 mb-4">
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-users w-5"></i>
                        <span>892 Students</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-chalkboard-teacher w-5"></i>
                        <span>62 Teachers</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-calendar w-5"></i>
                        <span>Est. 2010</span>
                    </div>
                </div>
                <div class="flex space-x-2">
                    <button onclick="viewSchool('SCH002')" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition text-sm">
                        <i class="fas fa-eye mr-1"></i>View
                    </button>
                    <button onclick="editSchool('SCH002')" class="flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition text-sm">
                        <i class="fas fa-edit mr-1"></i>Edit
                    </button>
                </div>
            </div>

            <!-- School Card 3 -->
            <div class="bg-white rounded-lg shadow hover:shadow-xl transition p-6">
                <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 p-3 rounded-lg">
                            <i class="fas fa-school text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">Riverside Public School</h3>
                            <p class="text-sm text-gray-600">School ID: SCH003</p>
                        </div>
                    </div>
                    <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Pending</span>
                </div>
                <div class="space-y-2 mb-4">
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-users w-5"></i>
                        <span>0 Students</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-chalkboard-teacher w-5"></i>
                        <span>0 Teachers</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <i class="fas fa-calendar w-5"></i>
                        <span>Est. 2024</span>
                    </div>
                </div>
                <div class="flex space-x-2">
                    <button onclick="viewSchool('SCH003')" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition text-sm">
                        <i class="fas fa-eye mr-1"></i>View
                    </button>
                    <button onclick="editSchool('SCH003')" class="flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition text-sm">
                        <i class="fas fa-edit mr-1"></i>Edit
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Add School Modal -->
    <div id="addSchoolModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Add New School</h3>
                <button onclick="closeAddSchoolModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="addSchoolForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">School Name</label>
                    <input type="text" name="schoolName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">School ID</label>
                    <input type="text" name="schoolId" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                    <textarea name="address" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" rows="3"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Contact Email</label>
                    <input type="email" name="contactEmail" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Contact Phone</label>
                    <input type="tel" name="contactPhone" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" onclick="closeAddSchoolModal()" class="flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg hover:bg-gray-300 transition">
                        Cancel
                    </button>
                    <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition">
                        Create School
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="../js/utils.js"></script>
    <script src="../js/auth-guard.js"></script>
    <script>
        function toggleMobileMenu() {
            if (typeof MobileMenuManager !== 'undefined') {
                MobileMenuManager.toggle('mobileMenu');
            }
        }

        function openAddSchoolModal() {
            document.getElementById('addSchoolModal').classList.remove('hidden');
        }

        function closeAddSchoolModal() {
            document.getElementById('addSchoolModal').classList.add('hidden');
        }

        function viewSchool(id) {
            if (!id) return;
            // In real app, navigate to school details page
            if (typeof NotificationManager !== 'undefined') {
                NotificationManager.info('Viewing school: ' + id);
            } else {
                alert('Viewing school: ' + id);
            }
        }

        function editSchool(id) {
            if (!id) return;
            // In real app, open edit modal with school data
            if (typeof NotificationManager !== 'undefined') {
                NotificationManager.info('Editing school: ' + id);
            } else {
                alert('Editing school: ' + id);
            }
        }

        document.getElementById('addSchoolForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            try {
                const formData = new FormData(this);
                const schoolName = formData.get('schoolName') || this.querySelector('[name="schoolName"]')?.value;
                const schoolId = formData.get('schoolId') || this.querySelector('[name="schoolId"]')?.value;
                
                if (!schoolName || !schoolId) {
                    if (typeof NotificationManager !== 'undefined') {
                        NotificationManager.warning('Please fill all required fields');
                    } else {
                        alert('Please fill all required fields');
                    }
                    return;
                }
                
                if (typeof NotificationManager !== 'undefined') {
                    NotificationManager.success('School created successfully!');
                } else {
                    alert('School created successfully!');
                }
                closeAddSchoolModal();
                this.reset();
            } catch (error) {
                console.error('Error creating school:', error);
                if (typeof NotificationManager !== 'undefined') {
                    NotificationManager.error('Failed to create school. Please try again.');
                } else {
                    alert('Failed to create school. Please try again.');
                }
            }
        });

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('#schoolsGrid > div');
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        });
    </script>

    <!-- New Features -->
    <script src="../js/global-search.js"></script>
    <script src="../js/notification-service.js"></script>
    <script src="../js/export-service.js"></script>
</body>
</html>

